/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";function e(e){return Math.round(t(e))}function t(e){return 1200/e}function r(e,t=e){return Math.round(7*s(e,t))}function s(e,r){return t(e)*function(e,t){return(50*e-31*t)/(19*t)}(e,r)}void 0===String.prototype.trim&&(String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$/g,"")});var n={A:".-",B:"-...",C:"-.-.",D:"-..",E:".",F:"..-.",G:"--.",H:"....",I:"..",J:".---",K:"-.-",L:".-..",M:"--",N:"-.",O:"---",P:".--.",Q:"--.-",R:".-.",S:"...",T:"-",U:"..-",V:"...-",W:".--",X:"-..-",Y:"-.--",Z:"--..",1:".----",2:"..---",3:"...--",4:"....-",5:".....",6:"-....",7:"--...",8:"---..",9:"----.",0:"-----",".":".-.-.-",",":"--..--",":":"---...","?":"..--..","'":".----.","-":"-....-","/":"-..-.","(":"-.--.",")":"-.--.-",'"':".-..-.","@":".--.-.","=":"-...-","&":".-...","+":".-.-.","!":"-.-.--"," ":"/"},i={},a={"<AA>":".-.-","<AR>":".-.-.","<AS>":".-...","<BK>":"-...-.-","<BT>":"-...-","<CL>":"-.-..-..","<CT>":"-.-.-","<DO>":"-..---","<KN>":"-.--.","<SK>":"...-.-","<VA>":"...-.-","<SN>":"...-.","<VE>":"...-.","<SOS>":"...---..."},o={},u={};for(var h in n)u[h]=n[h],i[n[h]]=h,o[n[h]]=h;for(var l in a)u[l]=a[l],o[a[l]]=l;var m=function(e){return(e=(e=(e=(e=(e=(e=e.replace(/\|/g,"/")).replace(/\//g," / ")).replace(/\s+/g," ")).replace(/(\/ )+\//g,"/")).replace(/_/g,"-")).replace(/^\s+/,"")).replace(/\s+$/,"")};class c extends class{constructor(e=!0){this.useProsigns=e,this.input="",this.output="",this.morse="",this.message="",this.inputWasMorse=void 0,this.hasError=void 0}translate(e,t){var r;if(void 0===t&&(t=function(e){return null!==(e=m(e)).match(/^[/.-][ /.-]*$/)}(e)),t?(this.inputWasMorse=!0,r=function(e,t=!0){var r={morse:"",message:"",hasError:!1};if(""===(e=m(e)))return r;var s,n,a,u=e.split(" ");s=t?o:i;for(var h=0;h<u.length;h++)void 0===(n=s[a=u[h]])?(r.morse+="#"+a+"# ",r.message+="#",r.hasError=!0):(r.morse+=a+" ",r.message+=n);return r.morse=r.morse.slice(0,r.morse.length-1),r}(e,this.useProsigns)):(this.inputWasMorse=!1,r=function(e,t=!0){var r={morse:"",message:"",hasError:!1};if(""===(e=function(e){return(e=(e=e.toUpperCase()).trim()).replace(/\s+/g," ")}(e)))return r;for(var s,i,a,o,h,l,m=[];e.length>0;)i=1,t&&(s=e.match(/^<...?>/))&&(i=s[0].length),m.push(e.slice(0,i)),e=e.slice(i,e.length);for(a=t?u:n,o=0;o<m.length;o++)void 0===(h=a[l=m[o]])?(r.message+="#"+l+"#",r.morse+="# ",r.hasError=!0):(r.message+=l,r.morse+=h+" ");return r.morse=r.morse.slice(0,r.morse.length-1),r}(e,this.useProsigns)),this.morse=r.morse,this.message=r.message,this.inputWasMorse?(this.input=this.morse,this.output=this.message):(this.input=this.message,this.output=this.morse),this.hasError=r.hasError,this.hasError)throw new Error("Error in input");return this.output}clearError(){this.inputWasMorse||(this.message=this.message.replace(/#[^#]*?#/g,"")),this.morse=this.morse.replace(/#/g,""),this.hasError=!1}}{constructor(e=!0,t=20,r=t){super(e),this.wpm=t,this.fwpm=r}set wpm(e){this._wpm=e,e<this._fwpm&&(this._fwpm=e)}get wpm(){return this._wpm}set fwpm(e){this._fwpm=e,e>this._wpm&&(this._wpm=e)}get fwpm(){return this._fwpm}get wordSpace(){return r(this._wpm,this._fwpm)}getTimings(){return c.getTimingsGeneral(e(this._wpm),(n=this._wpm,Math.round(3*t(n))),function(t){return e(t)}(this._wpm),function(e,t=e){return Math.round(3*s(e,t))}(this._wpm,this._fwpm),r(this._wpm,this._fwpm),this.morse);var n}static getTimingsGeneral(e,t,r,s,n,i){i=(i=i.replace(/ \/ /g,"/")).replace(/([\.\-])(?=[\.\-])/g,"$1+");for(var a=[],o=0;o<i.length;o++)switch(i[o]){case".":a.push(e);break;case"-":a.push(t);break;case"+":a.push(-r);break;case" ":a.push(-s);break;case"/":a.push(-n)}return a}getDuration(){for(var e=this.getTimings(),t=0,r=0;r<e.length;r++)t+=Math.abs(e[r]);return t}}class p extends c{constructor(e,t,r,s=550,n=8e3){super(e,t,r),this.frequency=s,this.sampleRate=n}getSample(e=0){return p.getSampleGeneral(this.getTimings(),this.frequency,this.sampleRate,e)}static getSampleGeneral(e,t,r,s=0){var n=[];if(0===e.length)return[];e.push(-Math.max(5,s));for(var i,a,o=1.5*t/r,u=Math.SQRT1_2,h=Math.sin(2*Math.PI*o),l=Math.cos(2*Math.PI*o),m=h/(2*Math.pow(10,u/20)),c=1+m,p=.5*(1-l)/c,g=(1-l)/c,f=.5*(1-l)/c,d=-2*l/c,w=(1-m)/c,v=2*Math.PI*t/r,b=e[0]>0?1:0,S=0,M=0,k=0,A=0,C=0;C<e.length;C+=1){for(var _=r*Math.abs(e[C])/1e3,E=0;E<_;E+=1)a=p*(i=b*Math.sin(E*v))+g*S+f*M-d*k-w*A,n.push(.813*a),M=S,S=i,A=k,k=a;b=1-b}return n}getWAASample(e=0){e=Math.max(5,e);var t=this.getTimings();t.push(-e);var r=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(void 0===r)throw new Error("No OfflineAudioContext class defined");var s=new r(1,this.sampleRate*(this.getDuration()+e)/1e3,this.sampleRate),n=s.createGain();n.gain.setValueAtTime(.813,0);var i=s.createBiquadFilter();i.type="lowpass",i.frequency.setValueAtTime(1.1*this.frequency,0),n.connect(i),i.connect(s.destination);for(var a,o,u=0,h=0;h<t.length;h++)o=Math.abs(t[h])/1e3,t[h]>0&&((a=s.createOscillator()).type="sine",a.frequency.setValueAtTime(this.frequency,u),a.start(u),a.stop(u+o),a.connect(n)),u+=o;return s.startRendering().then((function(e){return e.getChannelData(0)}))}}var g=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},f=function(e){return[255&e,e>>8&255]};console.log("Hello World2");let d=new Audio;window.doPlay=function(e,t,r,s,n){let i=1200/r;console.log(i);let a=7*i,o=new p(!0,t,r,s,8e3);o.translate(e,!1);var u=function(e,t=8e3,r=8){e=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=Math.max(Math.min(128+Math.round(127*e[r]),255),0);return t}(e);var s={chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],subChunk1Id:[102,109,116,32],subChunk1Size:16,audioFormat:1,numChannels:1,sampleRate:t,byteRate:0,blockAlign:0,bitsPerSample:r,subChunk2Id:[100,97,116,97],subChunk2Size:0};return s.blockAlign=s.numChannels*s.bitsPerSample>>3,s.byteRate=s.blockAlign*s.sampleRate,s.subChunk2Size=e.length*(s.bitsPerSample>>3),s.chunkSize=36+s.subChunk2Size,s.chunkId.concat(g(s.chunkSize),s.format,s.subChunk1Id,g(s.subChunk1Size),f(s.audioFormat),f(s.numChannels),g(s.sampleRate),g(s.byteRate),f(s.blockAlign),f(s.bitsPerSample),s.subChunk2Id,g(s.subChunk2Size),16==s.bitsPerSample?function(e){for(var t=[],r=0,s=e.length,n=0;n<s;n++)t[r++]=255&e[n],t[r++]=e[n]>>8&255;return t}(e):e)}(o.getSample(a));d=null,d=new Audio;let h=new Int8Array(u).buffer,l=window.URL.createObjectURL(new Blob([h]));d.src=l,d.addEventListener("ended",(()=>{n()})),d.play()},window.doPause=function(e){d.addEventListener("pause",(()=>{e()})),console.log("ended:"+d.ended),d.ended||d.paused||!d.src?e():d.pause()}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVEsSUFBSUMsVUFBVXZCLEdBQUt3QixPQUUzQkMsRUFBTXpELE9BQU8wRCxJQUFJQyxnQkFBZ0IsSUFBSUMsS0FBSyxDQUFDTixLQUUvQzdCLEVBQVFvQyxJQUFJSixFQUNaaEMsRUFBUXFDLGlCQUFpQixTQUFTLEtBQzlCakMsT0FFSkosRUFBUXNDLFFBZ0JaL0QsT0FBT2dFLFFBYlAsU0FBaUJDLEdBQ2J4QyxFQUFRcUMsaUJBQWlCLFNBQVMsS0FDOUJHLE9BRUoxQyxRQUFRQyxJQUFJLFNBQVdDLEVBQVF5QyxPQUMzQnpDLEVBQVF5QyxPQUFTekMsRUFBUTBDLFNBQVcxQyxFQUFRb0MsSUFDNUNJLElBRUF4QyxFQUFRMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbW9yc2UtcHJvL21vcnNlLXByby13cG0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vcnNlLXByby9tb3JzZS1wcm8uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vcnNlLXByby9tb3JzZS1wcm8tY3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vcnNlLXByby9tb3JzZS1wcm8tbWVzc2FnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9yc2UtcHJvL21vcnNlLXByby1jdy13YXZlLmpzIiwid2VicGFjazovLy8uL3NyYy9tb3JzZS1wcm8vbW9yc2UtcHJvLXV0aWwtcmlmZndhdmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vcnNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuVGhpcyBjb2RlIGlzIMKpIENvcHlyaWdodCBTdGVwaGVuIEMuIFBoaWxsaXBzLCAyMDE4LlxuRW1haWw6IHN0ZXZlQHNjcGhpbGxpcHMuY29tXG4qL1xuLypcbkxpY2Vuc2VkIHVuZGVyIHRoZSBFVVBMLCBWZXJzaW9uIDEuMiBvciDigJMgYXMgc29vbiB0aGV5IHdpbGwgYmUgYXBwcm92ZWQgYnkgdGhlIEV1cm9wZWFuIENvbW1pc3Npb24gLSBzdWJzZXF1ZW50IHZlcnNpb25zIG9mIHRoZSBFVVBMICh0aGUgXCJMaWNlbmNlXCIpO1xuWW91IG1heSBub3QgdXNlIHRoaXMgd29yayBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbmNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbmNlIGF0OiBodHRwczovL2pvaW51cC5lYy5ldXJvcGEuZXUvY29tbXVuaXR5L2V1cGwvXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbmNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBiYXNpcywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2VuY2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbmNlLlxuKi9cblxuLyoqXG4gKiBVc2VmdWwgY29uc3RhbnRzIGFuZCBmdW5jdGlvbnMgZm9yIGNvbXB1dGluZyB0aGUgc3BlZWQgb2YgTW9yc2UgY29kZS5cbiAqL1xuXG5jb25zdCBESVRTX1BFUl9XT1JEID0gNTA7ICAvKiogZGl0cyBpbiBcIlBBUklTIFwiICovXG5jb25zdCBTUEFDRVNfSU5fUEFSSVMgPSAxOTsgIC8qKiA1eCAzLWRpdCBpbnRlci1jaGFyYWN0ZXIgc3BhY2VzICsgMXggNy1kaXQgc3BhY2UgKi9cbmNvbnN0IE1TX0lOX01JTlVURSA9IDYwMDAwOyAgLyoqIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaW4gMSBtaW51dGUgKi9cblxuLyoqIEdldCB0aGUgZGl0IGxlbmd0aCBpbiBtc1xuICogQHBhcmFtIHtudW1iZXJ9IHdwbSAtIHNwZWVkIGluIHdvcmRzIHBlciBtaW51dGVcbiAqIEByZXR1cm4ge2ludGVnZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXRMZW5ndGgod3BtKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoX2RpdExlbmd0aCh3cG0pKTtcbn1cblxuZnVuY3Rpb24gX2RpdExlbmd0aCh3cG0pIHtcbiAgICByZXR1cm4gKE1TX0lOX01JTlVURSAvIERJVFNfUEVSX1dPUkQpIC8gd3BtO1xufVxuXG4vKipcbiAqIEdldCB0aGUgZGFoIGxlbmd0aCBpbiBtc1xuICogQHBhcmFtIHtudW1iZXJ9IHdwbSAtIHNwZWVkIGluIHdvcmRzIHBlciBtaW51dGVcbiAqIEByZXR1cm4ge2ludGVnZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkYWhMZW5ndGgod3BtKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoMyAqIF9kaXRMZW5ndGgod3BtKSk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBkaXQgc3BhY2UgaW4gbXNcbiAqIEBwYXJhbSB7bnVtYmVyfSB3cG0gLSBzcGVlZCBpbiB3b3JkcyBwZXIgbWludXRlXG4gKiBAcmV0dXJuIHtpbnRlZ2VyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGl0U3BhY2Uod3BtKSB7XG4gICAgcmV0dXJuIGRpdExlbmd0aCh3cG0pXG59XG5cbi8qKlxuICogR2V0IHRoZSBjaGFyYWN0ZXItc3BhY2UgaW4gbXNcbiAqIEBwYXJhbSB7bnVtYmVyfSB3cG0gLSBzcGVlZCBpbiB3b3JkcyBwZXIgbWludXRlXG4gKiBAcGFyYW0ge251bWJlcn0gW2Z3cG0gPSB3cG1dIC0gRmFybnN3b3J0aCBzcGVlZCBpbiB3b3JkcyBwZXIgbWludXRlXG4gKiBAcmV0dXJuIHtpbnRlZ2VyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hhclNwYWNlKHdwbSwgZndwbSA9IHdwbSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKDMgKiBfZmRpdExlbmd0aCh3cG0sIGZ3cG0pKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHdvcmQtc3BhY2UgaW4gbXNcbiAqIEBwYXJhbSB7bnVtYmVyfSB3cG0gLSBzcGVlZCBpbiB3b3JkcyBwZXIgbWludXRlXG4gKiBAcGFyYW0ge251bWJlcn0gW2Z3cG0gPSB3cG1dIC0gRmFybnN3b3J0aCBzcGVlZCBpbiB3b3JkcyBwZXIgbWludXRlXG4gKiBAcmV0dXJuIHtpbnRlZ2VyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gd29yZFNwYWNlKHdwbSwgZndwbSA9IHdwbSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKDcgKiBfZmRpdExlbmd0aCh3cG0sIGZ3cG0pKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIFdQTSBmb3IgYSBnaXZlbiBkaXQgbGVuZ3RoIGluIG1zXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3cG0oZGl0TGVuKSB7XG4gICAgcmV0dXJuIChNU19JTl9NSU5VVEUgLyBESVRTX1BFUl9XT1JEKSAvIGRpdExlbjtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIEZhcm5zd29ydGggZGl0IGxlbmd0aCBpbiBtcyBmb3IgYSBnaXZlbiBXUE0gYW5kIEZhcm5zd29ydGggV1BNLiBOb3RlLCBhY3R1YWwgZGl0LXNwYWNlcyBzaG91bGQgbm90IGJlIHNsb3dlZCBkb3duXG4gKiBAcmV0dXJuIHtpbnRlZ2VyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZmRpdExlbmd0aCh3cG0sIGZ3cG0pIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChfZmRpdExlbmd0aCh3cG0sIGZ3cG0pKTtcbn1cblxuZnVuY3Rpb24gX2ZkaXRMZW5ndGgod3BtLCBmd3BtKSB7XG4gICAgcmV0dXJuIF9kaXRMZW5ndGgod3BtKSAqIHJhdGlvKHdwbSwgZndwbSk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBkaXQgbGVuZ3RoIHJhdGlvIGZvciBhIGdpdmVuIFdQTSBhbmQgRmFybnN3b3J0aCBXUE1cbiAqIEBwYXJhbSB7bnVtYmVyfSB3cG0gLSBzcGVlZCBpbiB3b3JkcyBwZXIgbWludXRlXG4gKiBAcGFyYW0ge251bWJlcn0gZndwbSAtIEZhcm5zd29ydGggc3BlZWQgaW4gd29yZHMgcGVyIG1pbnV0ZVxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmF0aW8od3BtLCBmd3BtKSB7XG4gICAgLy8gXCJQQVJJUyBcIiBpcyAzMSB1bml0cyBmb3IgdGhlIGNoYXJhY3RlcnMgYW5kIDE5IHVuaXRzIGZvciB0aGUgaW50ZXItY2hhcmFjdGVyIHNwYWNlcyBhbmQgaW50ZXItd29yZCBzcGFjZVxuICAgIC8vIE9uZSB1bml0IHRha2VzIDEgKiA2MCAvICg1MCAqIHdwbSlcbiAgICAvLyBUaGUgMzEgdW5pdHMgc2hvdWxkIHRha2UgMzEgKiA2MCAvICg1MCAqIHdwbSkgc2Vjb25kcyBhdCB3cG1cbiAgICAvLyBcIlBBUklTIFwiIHNob3VsZCB0YWtlIDUwICogNjAgLyAoNTAgKiBmd3BtKSB0byB0cmFuc21pdCBhdCBmd3BtLCBvciA2MCAvIGZ3cG0gIHNlY29uZHMgYXQgZndwbVxuICAgIC8vIEtlZXBpbmcgdGhlIHRpbWUgZm9yIHRoZSBjaGFyYWN0ZXJzIGNvbnN0YW50LFxuICAgIC8vIFRoZSBzcGFjZXMgbmVlZCB0byB0YWtlOiAoNjAgLyBmd3BtKSAtIFszMSAqIDYwIC8gKDUwICogd3BtKV0gc2Vjb25kcyBpbiB0b3RhbFxuICAgIC8vIFRoZSBzcGFjZXMgYXJlIDQgaW50ZXItY2hhcmFjdGVyIHNwYWNlcyBvZiAzIHVuaXRzIGFuZCAxIGludGVyLXdvcmQgc3BhY2Ugb2YgNyB1bml0cy4gVGhlaXIgcmF0aW8gbXVzdCBiZSBtYWludGFpbmVkLlxuICAgIC8vIEEgc3BhY2UgdW5pdCBpczogWyg2MCAvIGZ3cG0pIC0gWzMxICogNjAgLyAoNTAgKiB3cG0pXV0gLyAxOSBzZWNvbmRzXG4gICAgLy8gQ29tcGFyaW5nIHRoYXQgdG8gNjAgLyAoNTAgKiB3cG0pIGdpdmVzIGEgcmF0aW8gb2YgKDUwLndwbSAtIDMxLmZ3cG0pIC8gMTkuZndwbVxuICAgIHJldHVybiAoRElUU19QRVJfV09SRCAqIHdwbSAtIChESVRTX1BFUl9XT1JEIC0gU1BBQ0VTX0lOX1BBUklTKSAqIGZ3cG0pIC8gKFNQQUNFU19JTl9QQVJJUyAqIGZ3cG0pO1xufVxuXG4vKiogR2V0IHRoZSBGYXJuc3dvcnRoIFdQTSBmb3IgYSBnaXZlbiBXUE0gYW5kIHJhdGlvICovXG5leHBvcnQgZnVuY3Rpb24gZndwbSh3cG0sIHIpIHtcbiAgICByZXR1cm4gRElUU19QRVJfV09SRCAqIHdwbSAvIChTUEFDRVNfSU5fUEFSSVMgKiByICsgKERJVFNfUEVSX1dPUkQgLSBTUEFDRVNfSU5fUEFSSVMpKTtcbn0iLCIvKiFcblRoaXMgY29kZSBpcyDCqSBDb3B5cmlnaHQgU3RlcGhlbiBDLiBQaGlsbGlwcywgMjAxOC5cbkVtYWlsOiBzdGV2ZUBzY3BoaWxsaXBzLmNvbVxuKi9cbi8qXG5MaWNlbnNlZCB1bmRlciB0aGUgRVVQTCwgVmVyc2lvbiAxLjIgb3Ig4oCTIGFzIHNvb24gdGhleSB3aWxsIGJlIGFwcHJvdmVkIGJ5IHRoZSBFdXJvcGVhbiBDb21taXNzaW9uIC0gc3Vic2VxdWVudCB2ZXJzaW9ucyBvZiB0aGUgRVVQTCAodGhlIFwiTGljZW5jZVwiKTtcbllvdSBtYXkgbm90IHVzZSB0aGlzIHdvcmsgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5jZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5jZSBhdDogaHR0cHM6Ly9qb2ludXAuZWMuZXVyb3BhLmV1L2NvbW11bml0eS9ldXBsL1xuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5jZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgYmFzaXMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbmNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5jZS5cbiovXG5cbi8qKlxuICogQmFzaWMgbWV0aG9kcyB0byB0cmFuc2xhdGUgTW9yc2UgY29kZS5cbiAqL1xuXG5pZiAodHlwZW9mKFN0cmluZy5wcm90b3R5cGUudHJpbSkgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBTdHJpbmcucHJvdG90eXBlLnRyaW0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyh0aGlzKS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgfTtcbn1cblxudmFyIHRleHQybW9yc2VIID0ge1xuICAgICdBJzogXCIuLVwiLFxuICAgICdCJzogXCItLi4uXCIsXG4gICAgJ0MnOiBcIi0uLS5cIixcbiAgICAnRCc6IFwiLS4uXCIsXG4gICAgJ0UnOiBcIi5cIixcbiAgICAnRic6IFwiLi4tLlwiLFxuICAgICdHJzogXCItLS5cIixcbiAgICAnSCc6IFwiLi4uLlwiLFxuICAgICdJJzogXCIuLlwiLFxuICAgICdKJzogXCIuLS0tXCIsXG4gICAgJ0snOiBcIi0uLVwiLFxuICAgICdMJzogXCIuLS4uXCIsXG4gICAgJ00nOiBcIi0tXCIsXG4gICAgJ04nOiBcIi0uXCIsXG4gICAgJ08nOiBcIi0tLVwiLFxuICAgICdQJzogXCIuLS0uXCIsXG4gICAgJ1EnOiBcIi0tLi1cIixcbiAgICAnUic6IFwiLi0uXCIsXG4gICAgJ1MnOiBcIi4uLlwiLFxuICAgICdUJzogXCItXCIsXG4gICAgJ1UnOiBcIi4uLVwiLFxuICAgICdWJzogXCIuLi4tXCIsXG4gICAgJ1cnOiBcIi4tLVwiLFxuICAgICdYJzogXCItLi4tXCIsXG4gICAgJ1knOiBcIi0uLS1cIixcbiAgICAnWic6IFwiLS0uLlwiLFxuICAgICcxJzogXCIuLS0tLVwiLFxuICAgICcyJzogXCIuLi0tLVwiLFxuICAgICczJzogXCIuLi4tLVwiLFxuICAgICc0JzogXCIuLi4uLVwiLFxuICAgICc1JzogXCIuLi4uLlwiLFxuICAgICc2JzogXCItLi4uLlwiLFxuICAgICc3JzogXCItLS4uLlwiLFxuICAgICc4JzogXCItLS0uLlwiLFxuICAgICc5JzogXCItLS0tLlwiLFxuICAgICcwJzogXCItLS0tLVwiLFxuICAgICcuJzogXCIuLS4tLi1cIixcbiAgICAnLCc6IFwiLS0uLi0tXCIsXG4gICAgJzonOiBcIi0tLS4uLlwiLFxuICAgICc/JzogXCIuLi0tLi5cIixcbiAgICAnXFwnJzogXCIuLS0tLS5cIixcbiAgICAnLSc6IFwiLS4uLi4tXCIsXG4gICAgJy8nOiBcIi0uLi0uXCIsXG4gICAgJygnOiBcIi0uLS0uXCIsXG4gICAgJyknOiBcIi0uLS0uLVwiLFxuICAgICdcIic6IFwiLi0uLi0uXCIsXG4gICAgJ0AnOiBcIi4tLS4tLlwiLFxuICAgICc9JzogXCItLi4uLVwiLFxuICAgICcmJzogXCIuLS4uLlwiLFxuICAgICcrJzogXCIuLS4tLlwiLFxuICAgICchJzogXCItLi0uLS1cIixcbiAgICAnICc6IFwiL1wiIC8vTm90IG1vcnNlIGJ1dCBoZWxwcyB0cmFuc2xhdGlvblxufTtcbnZhciBtb3JzZTJ0ZXh0SCA9IHt9O1xudmFyIHByb3NpZ24ybW9yc2VIID0ge1xuICAgICc8QUE+JzogJy4tLi0nLFxuICAgICc8QVI+JzogJy4tLi0uJyxcbiAgICAnPEFTPic6ICcuLS4uLicsXG4gICAgJzxCSz4nOiAnLS4uLi0uLScsXG4gICAgJzxCVD4nOiAnLS4uLi0nLCAvLyBhbHNvIDxUVj5cbiAgICAnPENMPic6ICctLi0uLi0uLicsXG4gICAgJzxDVD4nOiAnLS4tLi0nLFxuICAgICc8RE8+JzogJy0uLi0tLScsXG4gICAgJzxLTj4nOiAnLS4tLS4nLFxuICAgICc8U0s+JzogJy4uLi0uLScsIC8vIGFsc28gPFZBPlxuICAgICc8VkE+JzogJy4uLi0uLScsXG4gICAgJzxTTj4nOiAnLi4uLS4nLCAvLyBhbHNvIDxWRT5cbiAgICAnPFZFPic6ICcuLi4tLicsXG4gICAgJzxTT1M+JzogJy4uLi0tLS4uLidcbn07XG52YXIgbW9yc2Vwcm8ydGV4dEggPSB7fTtcbnZhciB0ZXh0Mm1vcnNlcHJvSCA9IHt9O1xuZm9yICh2YXIgdGV4dCBpbiB0ZXh0Mm1vcnNlSCkge1xuICAgIHRleHQybW9yc2Vwcm9IW3RleHRdID0gdGV4dDJtb3JzZUhbdGV4dF07XG4gICAgbW9yc2UydGV4dEhbdGV4dDJtb3JzZUhbdGV4dF1dID0gdGV4dDtcbiAgICBtb3JzZXBybzJ0ZXh0SFt0ZXh0Mm1vcnNlSFt0ZXh0XV0gPSB0ZXh0O1xufVxuZm9yICh2YXIgc2lnbiBpbiBwcm9zaWduMm1vcnNlSCkge1xuICAgIHRleHQybW9yc2Vwcm9IW3NpZ25dID0gcHJvc2lnbjJtb3JzZUhbc2lnbl07XG4gICAgbW9yc2Vwcm8ydGV4dEhbcHJvc2lnbjJtb3JzZUhbc2lnbl1dID0gc2lnbjtcbn1cblxudmFyIHRpZHlUZXh0ID0gZnVuY3Rpb24odGV4dCkge1xuICAgIHRleHQgPSB0ZXh0LnRvVXBwZXJDYXNlKCk7XG4gICAgdGV4dCA9IHRleHQudHJpbSgpO1xuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xccysvZywgJyAnKTtcbiAgICByZXR1cm4gdGV4dDtcbn07XG5cbi8qKlxuICogVHJhbnNsYXRlIHRleHQgdG8gbW9yc2UgaW4gJy4uLSAuLiAvIC0tJyBmb3JtLlxuICogSWYgc29tZXRoaW5nIGluIHRoZSB0ZXh0IGlzIHVudHJhbnNsYXRhYmxlIHRoZW4gaXQgaXMgc3Vycm91bmRlZCBieSBoYXNoLXNpZ25zICgnIycpIGFuZCBhIGhhc2ggaXMgcGxhY2VkIGluIHRoZSBtb3JzZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gYWxwaGFudW1lcmljIG1lc3NhZ2VcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlUHJvc2lnbnMgLSB0cnVlIGlmIHByb3NpZ25zIGFyZSB0byBiZSB1c2VkIChkZWZhdWx0IGlzIHRydWUpXG4gKiBAcmV0dXJuIHt7bWVzc2FnZTogc3RyaW5nLCBtb3JzZTogc3RyaW5nLCBoYXNFcnJvcjogYm9vbGVhbn19XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0ZXh0Mm1vcnNlKHRleHQsIHVzZVByb3NpZ25zID0gdHJ1ZSkge1xuICAgIHRleHQgPSB0aWR5VGV4dCh0ZXh0KTtcbiAgICB2YXIgcmV0ID0ge1xuICAgICAgICBtb3JzZTogXCJcIixcbiAgICAgICAgbWVzc2FnZTogXCJcIixcbiAgICAgICAgaGFzRXJyb3I6IGZhbHNlXG4gICAgfTtcbiAgICBpZiAodGV4dCA9PT0gXCJcIikge1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIHZhciB0b2tlbnMgPSBbXTtcbiAgICB2YXIgcHJvc2lnbjtcbiAgICB2YXIgdG9rZW5fbGVuZ3RoO1xuICAgIHdoaWxlICh0ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgdG9rZW5fbGVuZ3RoID0gMTtcbiAgICAgICAgaWYgKHVzZVByb3NpZ25zKSB7XG4gICAgICAgICAgICBwcm9zaWduID0gdGV4dC5tYXRjaCgvXjwuLi4/Pi8pOyAvLyBhcnJheSBvZiBtYXRjaGVzXG4gICAgICAgICAgICBpZiAocHJvc2lnbikge1xuICAgICAgICAgICAgICAgIHRva2VuX2xlbmd0aCA9IHByb3NpZ25bMF0ubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRva2Vucy5wdXNoKHRleHQuc2xpY2UoMCwgdG9rZW5fbGVuZ3RoKSk7XG4gICAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKHRva2VuX2xlbmd0aCwgdGV4dC5sZW5ndGgpO1xuICAgIH1cbiAgICB2YXIgZGljdDtcbiAgICBpZiAodXNlUHJvc2lnbnMpIHtcbiAgICAgICAgZGljdCA9IHRleHQybW9yc2Vwcm9IO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRpY3QgPSB0ZXh0Mm1vcnNlSDtcbiAgICB9XG4gICAgdmFyIGksIGMsIHQ7XG4gICAgZm9yIChpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0ID0gdG9rZW5zW2ldO1xuICAgICAgICBjID0gZGljdFt0XTtcbiAgICAgICAgaWYgKGMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0Lm1lc3NhZ2UgKz0gXCIjXCIgKyB0ICsgXCIjXCI7XG4gICAgICAgICAgICByZXQubW9yc2UgKz0gXCIjIFwiO1xuICAgICAgICAgICAgcmV0Lmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldC5tZXNzYWdlICs9IHQ7XG4gICAgICAgICAgICByZXQubW9yc2UgKz0gYyArIFwiIFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldC5tb3JzZSA9IHJldC5tb3JzZS5zbGljZSgwLCByZXQubW9yc2UubGVuZ3RoIC0gMSk7XG4gICAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBUcmFuc2xhdGUgdGV4dCB0byBtb3JzZSBpbiAnRGktZGktZGFoIGRhaCcgZm9ybS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gYWxwaGFudW1lcmljIG1lc3NhZ2VcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlUHJvc2lnbnMgLSB0cnVlIGlmIHByb3NpZ25zIGFyZSB0byBiZSB1c2VkIChkZWZhdWx0IGlzIHRydWUpXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0ZXh0MmRpdGRhaCh0ZXh0LCB1c2VQcm9zaWducykge1xuICAgIC8vIFRPRE86IGRlYWwgd2l0aCBlcnJvcnMgaW4gdGhlIHRyYW5zbGF0aW9uXG4gICAgdmFyIGRpdGRhaCA9IHRleHQybW9yc2UodGV4dCwgdXNlUHJvc2lnbnMpLm1vcnNlICsgJyAnOyAvLyBnZXQgdGhlIGRvdHMgYW5kIGRhc2hlc1xuICAgIGRpdGRhaCA9IGRpdGRhaC5yZXBsYWNlKC9cXC4vZywgJ2RpficpLnJlcGxhY2UoL1xcLS9nLCAnZGFoficpOyAvLyBkbyB0aGUgYmFzaWMgam9iXG4gICAgZGl0ZGFoID0gZGl0ZGFoLnJlcGxhY2UoL34vZywgJy0nKTsgLy8gcmVwbGFjZSBwbGFjZWhvbGRlciB3aXRoIGRhc2hcbiAgICBkaXRkYWggPSBkaXRkYWgucmVwbGFjZSgvXFwtIC9nLCAnICcpOyAvLyByZW1vdmUgdHJhaWxpbmcgZGFzaGVzXG4gICAgZGl0ZGFoID0gZGl0ZGFoLnJlcGxhY2UoL2RpIC9nLCAnZGl0ICcpOyAvLyB1c2UgJ2RpdCcgYXQgZW5kIG9mIGxldHRlclxuICAgIGRpdGRhaCA9IGRpdGRhaC5yZXBsYWNlKC8gXFwvIC9nLCAnLCAnKTsgLy8gZG8gcHVuY3R1YXRpb25cbiAgICBkaXRkYWggPSBkaXRkYWgucmVwbGFjZSgvXmQvLCAnRCcpOyAvLyBkbyBjYXBpdGFsaXNhdGlvblxuICAgIGRpdGRhaCA9IGRpdGRhaC5yZXBsYWNlKC8gJC8sICcnKTsgLy8gcmVtb3ZlIHRoZSBzcGFjZSB3ZSBhZGRlZFxuICAgIGRpdGRhaCA9IGRpdGRhaC5yZXBsYWNlKC8oW3RoXSkkLywgJyQxLicpOyAvLyBhZGQgZnVsbC1zdG9wIGlmIHRoZXJlIGlzIGFueXRoaW5nIHRoZXJlXG4gICAgcmV0dXJuIGRpdGRhaDtcbn1cblxuLyoqXG4gKiBDYW5vbmljYWxpc2UgbW9yc2UgdGV4dC5cbiAqIENhbm9uaWNhbCBmb3JtIG1hdGNoZXMgWy4tLyBdKiwgaGFzIHNpbmdsZSBzcGFjZXMgYmV0d2VlbiBjaGFyYWN0ZXJzLCBoYXMgd29yZHMgc2VwYXJhdGVkIGJ5ICcgLyAnLCBhbmQgaGFzIG5vIHNwYWNlcyBhdCB0aGUgc3RhcnQgb3IgZW5kLlxuICogQSBzaW5nbGUgJy8nIG1heSBiZSByZXR1cm5lZCBieSB0aGlzIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IG1vcnNlIC0gTW9yc2UgY29kZSBtYXRjaGluZyBbLi1fL3wgXSpcbiAqIEByZXR1cm4ge3N0cmluZ30gTW9yc2UgY29kZSBpbiBjYW5vbmljYWwgZm9ybSBtYXRjaGluZyBbLi0vIF0qXG4gKi9cbnZhciB0aWR5TW9yc2UgPSBmdW5jdGlvbihtb3JzZSkge1xuICAgIG1vcnNlID0gbW9yc2UucmVwbGFjZSgvXFx8L2csIFwiL1wiKTsgLy8gdW5pZnkgdGhlIHdvcmQgc2VwYXJhdG9yXG4gICAgbW9yc2UgPSBtb3JzZS5yZXBsYWNlKC9cXC8vZywgXCIgLyBcIik7IC8vIG1ha2Ugc3VyZSB3b3JkIHNlcGFyYXRvcnMgYXJlIHNwYWNlZCBvdXRcbiAgICBtb3JzZSA9IG1vcnNlLnJlcGxhY2UoL1xccysvZywgXCIgXCIpOyAvLyBzcXVhc2ggbXVsdGlwbGUgc3BhY2VzIGludG8gc2luZ2xlIHNwYWNlc1xuICAgIG1vcnNlID0gbW9yc2UucmVwbGFjZSgvKFxcLyApK1xcLy9nLCBcIi9cIik7IC8vIHNxdWFzaCBtdWx0aXBsZSB3b3JkIHNlcGFyYXRvcnNcbiAgICBtb3JzZSA9IG1vcnNlLnJlcGxhY2UoL18vZywgXCItXCIpOyAvLyB1bmlmeSB0aGUgZGFzaCBjaGFyYWN0ZXJcbiAgICBtb3JzZSA9IG1vcnNlLnJlcGxhY2UoL15cXHMrLywgXCJcIik7ICAvLyByZW1vdmUgaW5pdGlhbCB3aGl0ZXNwYWNlXG4gICAgbW9yc2UgPSBtb3JzZS5yZXBsYWNlKC9cXHMrJC8sIFwiXCIpOyAgLy8gcmVtb3ZlIHRyYWlsaW5nIHdoaXRlc3BhY2VcbiAgICByZXR1cm4gbW9yc2U7XG59O1xuXG4vKipcbiAqIFRyYW5zbGF0ZSBtb3JzZSB0byB0ZXh0LiBDYW5vbmljYWxpc2UgdGhlIG1vcnNlIGZpcnN0LlxuICogSWYgc29tZXRoaW5nIGluIHRoZSBtb3JzZSBpcyB1bnRyYW5zbGF0YWJsZSB0aGVuIGl0IGlzIHN1cnJvdW5kZWQgYnkgaGFzaC1zaWducyAoJyMnKSBhbmQgYSBoYXNoIGlzIHBsYWNlZCBpbiB0aGUgdGV4dC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBtb3JzZSAtIG1vcnNlIG1lc3NhZ2UgdXNpbmcgWy4tXy98IF0gY2hhcmFjdGVyc1xuICogQHBhcmFtIHtib29sZWFufSB1c2VQcm9zaWducyAtIHRydWUgaWYgcHJvc2lnbnMgYXJlIHRvIGJlIHVzZWQgKGRlZmF1bHQgaXMgdHJ1ZSlcbiAqIEByZXR1cm4ge3ttZXNzYWdlOiBzdHJpbmcsIG1vcnNlOiBzdHJpbmcsIGhhc0Vycm9yOiBib29sZWFufX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vcnNlMnRleHQobW9yc2UsIHVzZVByb3NpZ25zID0gdHJ1ZSkge1xuICAgIG1vcnNlID0gdGlkeU1vcnNlKG1vcnNlKTtcbiAgICB2YXIgcmV0ID0ge1xuICAgICAgICBtb3JzZTogXCJcIixcbiAgICAgICAgbWVzc2FnZTogXCJcIixcbiAgICAgICAgaGFzRXJyb3I6IGZhbHNlXG4gICAgfTtcbiAgICBpZiAobW9yc2UgPT09IFwiXCIpIHtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICB2YXIgdG9rZW5zID0gbW9yc2Uuc3BsaXQoXCIgXCIpO1xuICAgIHZhciBkaWN0O1xuICAgIGlmICh1c2VQcm9zaWducykge1xuICAgICAgICBkaWN0ID0gbW9yc2Vwcm8ydGV4dEg7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGljdCA9IG1vcnNlMnRleHRIO1xuICAgIH1cbiAgICB2YXIgYywgdDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0ID0gdG9rZW5zW2ldO1xuICAgICAgICBjID0gZGljdFt0XTtcbiAgICAgICAgaWYgKGMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0Lm1vcnNlICs9IFwiI1wiICsgdCArIFwiIyBcIjtcbiAgICAgICAgICAgIHJldC5tZXNzYWdlICs9IFwiI1wiO1xuICAgICAgICAgICAgcmV0Lmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldC5tb3JzZSArPSB0ICsgXCIgXCI7XG4gICAgICAgICAgICByZXQubWVzc2FnZSArPSBjO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldC5tb3JzZSA9IHJldC5tb3JzZS5zbGljZSgwLCByZXQubW9yc2UubGVuZ3RoIC0gMSk7XG4gICAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgd2hldGhlciBhIHN0cmluZyBpcyBtb3N0IGxpa2VseSBtb3JzZSBjb2RlLlxuICogQHBhcmFtIHtzdHJpbmd9IGlucHV0IC0gdGhlIHRleHRcbiAqIEByZXR1cm4ge2Jvb2xlYW59IC0gdHJ1ZSBpZiB0aGUgc3RyaW5nIG9ubHkgaGFzIE1vcnNlIGNoYXJhY3RlcnMgaW4gYWZ0ZXIgZXhlY3V0aW5nIHRpZHlNb3JzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gbG9va3NMaWtlTW9yc2UoaW5wdXQpIHtcbiAgICBpbnB1dCA9IHRpZHlNb3JzZShpbnB1dCk7XG4gICAgcmV0dXJuIChpbnB1dC5tYXRjaCgvXlsvLi1dWyAvLi1dKiQvKSAhPT0gbnVsbCk7XG59XG4iLCIvKiFcblRoaXMgY29kZSBpcyDCqSBDb3B5cmlnaHQgU3RlcGhlbiBDLiBQaGlsbGlwcywgMjAxOC5cbkVtYWlsOiBzdGV2ZUBzY3BoaWxsaXBzLmNvbVxuKi9cbi8qXG5MaWNlbnNlZCB1bmRlciB0aGUgRVVQTCwgVmVyc2lvbiAxLjIgb3Ig4oCTIGFzIHNvb24gdGhleSB3aWxsIGJlIGFwcHJvdmVkIGJ5IHRoZSBFdXJvcGVhbiBDb21taXNzaW9uIC0gc3Vic2VxdWVudCB2ZXJzaW9ucyBvZiB0aGUgRVVQTCAodGhlIFwiTGljZW5jZVwiKTtcbllvdSBtYXkgbm90IHVzZSB0aGlzIHdvcmsgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5jZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5jZSBhdDogaHR0cHM6Ly9qb2ludXAuZWMuZXVyb3BhLmV1L2NvbW11bml0eS9ldXBsL1xuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5jZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgYmFzaXMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbmNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5jZS5cbiovXG5cbmltcG9ydCAqIGFzIFdQTSBmcm9tICcuL21vcnNlLXByby13cG0nO1xuaW1wb3J0IE1vcnNlTWVzc2FnZSBmcm9tICcuL21vcnNlLXByby1tZXNzYWdlJztcblxuLyoqXG4gKiBDbGFzcyB0byBjcmVhdGUgdGhlIG9uL29mZiB0aW1pbmdzIG5lZWRlZCBieSBlLmcuIHNvdW5kIGdlbmVyYXRvcnMuIFRpbWluZ3MgYXJlIGluIG1pbGxpc2Vjb25kczsgXCJvZmZcIiB0aW1pbmdzIGFyZSBuZWdhdGl2ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IE1vcnNlQ1cgZnJvbSAnbW9yc2UtcHJvLWN3JztcbiAqIHZhciBtb3JzZUNXID0gbmV3IE1vcnNlQ1coKTtcbiAqIG1vcnNlQ1cudHJhbnNsYXRlKFwiYWJjXCIpO1xuICogdmFyIHRpbWluZ3MgPSBtb3JzZUNXLmdldFRpbWluZ3MoKTtcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9yc2VDVyBleHRlbmRzIE1vcnNlTWVzc2FnZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcHJvc2lnbnM9dHJ1ZV0gLSB3aGV0aGVyIG9yIG5vdCB0byBpbmNsdWRlIHByb3NpZ25zIGluIHRoZSB0cmFuc2xhdGlvbnNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3dwbT0yMF0gLSB0aGUgc3BlZWQgaW4gd29yZHMgcGVyIG1pbnV0ZSB1c2luZyBQQVJJUyBhcyB0aGUgc3RhbmRhcmQgd29yZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZndwbT13cG1dIC0gdGhlIEZhcm5zd29ydGggc3BlZWQgaW4gd29yZHMgcGVyIG1pbnV0ZSAoZGVmYXVsdHMgdG8gd3BtKVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHVzZVByb3NpZ25zID0gdHJ1ZSwgd3BtID0gMjAsIGZ3cG0gPSB3cG0pIHtcbiAgICAgICAgc3VwZXIodXNlUHJvc2lnbnMpO1xuICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICAgICAgdGhpcy53cG0gPSB3cG07XG4gICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgICAgICB0aGlzLmZ3cG0gPSBmd3BtO1xuICAgIH1cblxuICAgIC8qKiBcbiAgICAgKiBTZXQgdGhlIFdQTSBzcGVlZC4gRW5zdXJlcyB0aGF0IEZhcm5zd29ydGggV1BNIGlzIG5vIGZhc3RlciB0aGFuIFdQTS5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIHNldCB3cG0od3BtKSB7XG4gICAgICAgIHRoaXMuX3dwbSA9IHdwbTtcbiAgICAgICAgaWYgKHdwbSA8IHRoaXMuX2Z3cG0pIHtcbiAgICAgICAgICAgIHRoaXMuX2Z3cG0gPSB3cG07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICBnZXQgd3BtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fd3BtO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgRmFybnN3b3J0aCBXUE0gc3BlZWQuIEVuc3VyZXMgdGhhdCBXUE0gaXMgbm8gc2xvd2VyIHRoYW4gRmFybnN3b3J0aCBXUE0uXG4gICAgICogIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgc2V0IGZ3cG0oZndwbSkge1xuICAgICAgICB0aGlzLl9md3BtID0gZndwbTtcbiAgICAgICAgaWYgKGZ3cG0gPiB0aGlzLl93cG0pIHtcbiAgICAgICAgICAgIHRoaXMuX3dwbSA9IGZ3cG07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICBnZXQgZndwbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Z3cG07XG4gICAgfVxuXG4gICAgLyoqIFxuICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSBzcGFjZSBiZXR3ZWVuIHdvcmRzIGluIG1zLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgZ2V0IHdvcmRTcGFjZSgpIHtcbiAgICAgICAgcmV0dXJuIFdQTS53b3JkU3BhY2UodGhpcy5fd3BtLCB0aGlzLl9md3BtKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgbWlsbGlzZWNvbmQgdGltaW5ncy5cbiAgICAgKiBXaXRoIHRoZSBGYXJuc3dvcnRoIG1ldGhvZCwgdGhlIG1vcnNlIGNoYXJhY3RlcnMgYXJlIHBsYXllZCBhdCBvbmVcbiAgICAgKiBzcGVlZCBhbmQgdGhlIHNwYWNlcyBiZXR3ZWVuIGNoYXJhY3RlcnMgYXQgYSBzbG93ZXIgc3BlZWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyW119XG4gICAgICovXG4gICAgZ2V0VGltaW5ncygpIHtcbiAgICAgICAgcmV0dXJuIE1vcnNlQ1cuZ2V0VGltaW5nc0dlbmVyYWwoXG4gICAgICAgICAgICBXUE0uZGl0TGVuZ3RoKHRoaXMuX3dwbSksXG4gICAgICAgICAgICBXUE0uZGFoTGVuZ3RoKHRoaXMuX3dwbSksXG4gICAgICAgICAgICBXUE0uZGl0U3BhY2UodGhpcy5fd3BtKSxcbiAgICAgICAgICAgIFdQTS5jaGFyU3BhY2UodGhpcy5fd3BtLCB0aGlzLl9md3BtKSxcbiAgICAgICAgICAgIFdQTS53b3JkU3BhY2UodGhpcy5fd3BtLCB0aGlzLl9md3BtKSxcbiAgICAgICAgICAgIHRoaXMubW9yc2VcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgbWlsbGlzZWNvbmQgdGltaW5ncy5cbiAgICAgKiBFYWNoIHNvdW5kIGFuZCBzcGFjZSBoYXMgYSBkdXJhdGlvbi4gVGhlIGR1cmF0aW9ucyBvZiB0aGUgc3BhY2VzIGFyZSBkaXN0aW5ndWlzaGVkIGJ5IGJlaW5nIG5lZ2F0aXZlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaXQgLSB0aGUgbGVuZ3RoIG9mIGEgZGl0IGluIG1pbGxpc2Vjb25kc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkYWggLSB0aGUgbGVuZ3RoIG9mIGEgZGFoIGluIG1pbGxpc2Vjb25kcyAobm9ybWFsbHkgMyAqIGRpdClcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGl0U3BhY2UgLSB0aGUgbGVuZ3RoIG9mIGFuIGludHJhLWNoYXJhY3RlciBzcGFjZSBpbiBtaWxsaXNlY29uZHMgKDEgKiBkaXQpXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNoYXJTcGFjZSAtIHRoZSBsZW5ndGggb2YgYW4gaW50ZXItY2hhcmFjdGVyIHNwYWNlIGluIG1pbGxpc2Vjb25kcyAobm9ybWFsbHkgMyAqIGRpdClcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd29yZFNwYWNlIC0gdGhlIGxlbmd0aCBvZiBhbiBpbnRlci13b3JkIHNwYWNlIGluIG1pbGxpc2Vjb25kcyAobm9ybWFsbHkgNyAqIGRpdClcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9yc2UgLSB0aGUgKGNhbm9uaWNhbCkgbW9yc2UgY29kZSBzdHJpbmcgKG1hdGNoaW5nIFsuLS8gXSopXG4gICAgICogQHJldHVybiB7bnVtYmVyW119XG4gICAgICovXG4gICAgc3RhdGljIGdldFRpbWluZ3NHZW5lcmFsKGRpdCwgZGFoLCBkaXRTcGFjZSwgY2hhclNwYWNlLCB3b3JkU3BhY2UsIG1vcnNlKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJNb3JzZTogXCIgKyBtb3JzZSk7XG4gICAgICAgIG1vcnNlID0gbW9yc2UucmVwbGFjZSgvIFxcLyAvZywgJy8nKTsgIC8vIHRoaXMgbWVhbnMgdGhhdCBhIHNwYWNlIGlzIG9ubHkgdXNlZCBmb3IgaW50ZXItY2hhcmFjdGVyXG4gICAgICAgIG1vcnNlID0gbW9yc2UucmVwbGFjZSgvKFtcXC5cXC1dKSg/PVtcXC5cXC1dKS9nLCBcIiQxK1wiKTsgIC8vIHB1dCBhICsgaW4gYmV0d2VlbiBhbGwgZGl0cyBhbmQgZGFoc1xuICAgICAgICB2YXIgdGltZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb3JzZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc3dpdGNoIChtb3JzZVtpXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJy4nOlxuICAgICAgICAgICAgICAgICAgICB0aW1lcy5wdXNoKGRpdCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJy0nOlxuICAgICAgICAgICAgICAgICAgICB0aW1lcy5wdXNoKGRhaCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJysnOlxuICAgICAgICAgICAgICAgICAgICB0aW1lcy5wdXNoKC1kaXRTcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCIgXCI6XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzLnB1c2goLWNoYXJTcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCIvXCI6XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzLnB1c2goLXdvcmRTcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJUaW1pbmdzOiBcIiArIHRpbWVzKTtcbiAgICAgICAgcmV0dXJuIHRpbWVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdG90YWwgZHVyYXRpb24gb2YgdGhlIG1lc3NhZ2UgaW4gbXNcbiAgICAgOCBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0RHVyYXRpb24oKSB7XG4gICAgICAgIHZhciB0aW1lcyA9IHRoaXMuZ2V0VGltaW5ncygpO1xuICAgICAgICB2YXIgdCA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGltZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHQgKz0gTWF0aC5hYnModGltZXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbn1cbiIsIi8qIVxuVGhpcyBjb2RlIGlzIMKpIENvcHlyaWdodCBTdGVwaGVuIEMuIFBoaWxsaXBzLCAyMDE4LlxuRW1haWw6IHN0ZXZlQHNjcGhpbGxpcHMuY29tXG4qL1xuLypcbkxpY2Vuc2VkIHVuZGVyIHRoZSBFVVBMLCBWZXJzaW9uIDEuMiBvciDigJMgYXMgc29vbiB0aGV5IHdpbGwgYmUgYXBwcm92ZWQgYnkgdGhlIEV1cm9wZWFuIENvbW1pc3Npb24gLSBzdWJzZXF1ZW50IHZlcnNpb25zIG9mIHRoZSBFVVBMICh0aGUgXCJMaWNlbmNlXCIpO1xuWW91IG1heSBub3QgdXNlIHRoaXMgd29yayBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbmNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbmNlIGF0OiBodHRwczovL2pvaW51cC5lYy5ldXJvcGEuZXUvY29tbXVuaXR5L2V1cGwvXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbmNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBiYXNpcywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2VuY2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbmNlLlxuKi9cblxuaW1wb3J0ICogYXMgTW9yc2UgZnJvbSAnLi9tb3JzZS1wcm8nO1xuXG4vKipcbiAqIENsYXNzIGZvciBjb252ZW5pZW50bHkgdHJhbnNsYXRpbmcgdG8gYW5kIGZyb20gTW9yc2UgY29kZS5cbiAqIERlYWxzIHdpdGggZXJyb3IgaGFuZGxpbmcuXG4gKiBXb3JrcyBvdXQgaWYgdGhlIGlucHV0IGlzIE1vcnNlIGNvZGUgb3Igbm90LlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgTW9yc2VNZXNzYWdlIGZyb20gJ21vcnNlLXByby1tZXNzYWdlJztcbiAqIHZhciBtb3JzZU1lc3NhZ2UgPSBuZXcgTW9yc2VNZXNzYWdlKCk7XG4gKiB2YXIgaW5wdXQ7XG4gKiB2YXIgb3V0cHV0O1xuICogdHJ5IHtcbiAqICAgICBvdXRwdXQgPSBtb3JzZU1lc3NhZ2UudHJhbnNsYXRlKFwiYWJjXCIpO1xuICogY2F0Y2ggKGV4KSB7XG4gKiAgICAgLy8gaW5wdXQgd2lsbCBoYXZlIGVycm9ycyBzdXJyb3VuZGVkIGJ5IHBhaXJlZCAnIycgc2lnbnNcbiAqICAgICAvLyBvdXRwdXQgd2lsbCBiZSBiZXN0IGF0dGVtcHQgYXQgdHJhbnNsYXRpb24sIHdpdGggdW50cmFuc2xhdGFibGVzIHJlcGxhY2VkIHdpdGggJyMnXG4gKiAgICAgbW9yc2VNZXNzYWdlLmNsZWFyRXJyb3IoKTsgIC8vIHJlbW92ZSBhbGwgdGhlICcjJ1xuICogfVxuICogaWYgKG1vcnNlTWVzc2FnZS5pbnB1dFdhc01vcnNlKSB7XG4gKiAgICAgLy8gZG8gc29tZXRoaW5nXG4gKiB9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vcnNlTWVzc2FnZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcHJvc2lnbnM9dHJ1ZV0gLSB3aGV0aGVyIG9yIG5vdCB0byBpbmNsdWRlIHByb3NpZ25zIGluIHRoZSB0cmFuc2xhdGlvbnNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih1c2VQcm9zaWducyA9IHRydWUpIHtcbiAgICAgICAgdGhpcy51c2VQcm9zaWducyA9IHVzZVByb3NpZ25zO1xuICAgICAgICB0aGlzLmlucHV0ID0gXCJcIjtcbiAgICAgICAgdGhpcy5vdXRwdXQgPSBcIlwiO1xuICAgICAgICB0aGlzLm1vcnNlID0gXCJcIjtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gXCJcIjtcbiAgICAgICAgdGhpcy5pbnB1dFdhc01vcnNlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmhhc0Vycm9yID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dCAtIGFscGhhbnVtZXJpYyB0ZXh0IG9yIG1vcnNlIGNvZGUgdG8gdHJhbnNsYXRlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpc01vcnNlIC0gd2hldGhlciB0aGUgaW5wdXQgaXMgTW9yc2UgY29kZSBvciBub3QgKGlmIG5vdCBzZXQgdGhlbiB0aGUgbG9va3NMaWtlTW9yc2UgbWV0aG9kIHdpbGwgYmUgdXNlZClcbiAgICAgKi9cbiAgICB0cmFuc2xhdGUoaW5wdXQsIGlzTW9yc2UpIHtcbiAgICAgICAgdmFyIHRyYW5zbGF0aW9uO1xuXG4gICAgICAgIGlmICh0eXBlb2YgaXNNb3JzZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgLy8gbWFrZSBhIGd1ZXNzOiBjb3VsZCBiZSB3cm9uZyBpZiBzb21lb25lIHdhbnRzIHRvIHRyYW5zbGF0ZSBcIi5cIiBpbnRvIE1vcnNlIGZvciBpbnN0YW5jZVxuICAgICAgICAgICAgaXNNb3JzZSA9IE1vcnNlLmxvb2tzTGlrZU1vcnNlKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNNb3JzZSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dFdhc01vcnNlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uID0gTW9yc2UubW9yc2UydGV4dChpbnB1dCwgdGhpcy51c2VQcm9zaWducyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlucHV0V2FzTW9yc2UgPSBmYWxzZTtcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uID0gTW9yc2UudGV4dDJtb3JzZShpbnB1dCwgdGhpcy51c2VQcm9zaWducyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1vcnNlID0gdHJhbnNsYXRpb24ubW9yc2U7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IHRyYW5zbGF0aW9uLm1lc3NhZ2U7XG5cbiAgICAgICAgaWYgKHRoaXMuaW5wdXRXYXNNb3JzZSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dCA9IHRoaXMubW9yc2U7XG4gICAgICAgICAgICB0aGlzLm91dHB1dCA9IHRoaXMubWVzc2FnZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQgPSB0aGlzLm1lc3NhZ2U7XG4gICAgICAgICAgICB0aGlzLm91dHB1dCA9IHRoaXMubW9yc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJhbnNsYXRpb24uaGFzRXJyb3I7XG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBpbiBpbnB1dFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5vdXRwdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgYWxsIHRoZSBlcnJvcnMgZnJvbSB0aGUgbW9yc2UgYW5kIG1lc3NhZ2UuIFVzZWZ1bCBpZiB5b3Ugd2FudCB0byBwbGF5IHRoZSBzb3VuZCBldmVuIHRob3VnaCBpdCBkaWRuJ3QgdHJhbnNsYXRlLlxuICAgICAqL1xuICAgIGNsZWFyRXJyb3IoKSB7XG4gICAgICAgIGlmICh0aGlzLmlucHV0V2FzTW9yc2UpIHtcbiAgICAgICAgICAgIHRoaXMubW9yc2UgPSB0aGlzLm1vcnNlLnJlcGxhY2UoLyMvZywgXCJcIik7ICAvLyBsZWF2ZSBpbiB0aGUgYmFkIE1vcnNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSB0aGlzLm1lc3NhZ2UucmVwbGFjZSgvI1teI10qPyMvZywgXCJcIik7XG4gICAgICAgICAgICB0aGlzLm1vcnNlID0gdGhpcy5tb3JzZS5yZXBsYWNlKC8jL2csIFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICB9XG59XG4iLCIvKiFcblRoaXMgY29kZSBpcyDCqSBDb3B5cmlnaHQgU3RlcGhlbiBDLiBQaGlsbGlwcywgMjAxOC5cbkVtYWlsOiBzdGV2ZUBzY3BoaWxsaXBzLmNvbVxuKi9cbi8qXG5MaWNlbnNlZCB1bmRlciB0aGUgRVVQTCwgVmVyc2lvbiAxLjIgb3Ig4oCTIGFzIHNvb24gdGhleSB3aWxsIGJlIGFwcHJvdmVkIGJ5IHRoZSBFdXJvcGVhbiBDb21taXNzaW9uIC0gc3Vic2VxdWVudCB2ZXJzaW9ucyBvZiB0aGUgRVVQTCAodGhlIFwiTGljZW5jZVwiKTtcbllvdSBtYXkgbm90IHVzZSB0aGlzIHdvcmsgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5jZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5jZSBhdDogaHR0cHM6Ly9qb2ludXAuZWMuZXVyb3BhLmV1L2NvbW11bml0eS9ldXBsL1xuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5jZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgYmFzaXMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbmNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5jZS5cbiovXG5cbmltcG9ydCBNb3JzZUNXIGZyb20gJy4vbW9yc2UtcHJvLWN3JztcblxuLyoqXG4gKiBDbGFzcyB0byBjcmVhdGUgc2luZS13YXZlIHNhbXBsZXMgb2Ygc3RhbmRhcmQgQ1cgTW9yc2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCBNb3JzZUNXV2F2ZSBmcm9tICdtb3JzZS1wcm8tY3ctd2F2ZSc7XG4gKiB2YXIgbW9yc2VDV1dhdmUgPSBuZXcgTW9yc2VDV1dhdmUoKTtcbiAqIG1vcnNlQ1dXYXZlLnRyYW5zbGF0ZShcImFiY1wiKTtcbiAqIHZhciBzYW1wbGUgPSBtb3JzZUNXV2F2ZS5nZXRTYW1wbGUoKTtcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9yc2VDV1dhdmUgZXh0ZW5kcyBNb3JzZUNXIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2ZyZXF1ZW5jeT01NTBdIC0gZnJlcXVlbmN5IG9mIHdhdmUgaW4gSHpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3NhbXBsZVJhdGU9ODAwMF0gLSBzYW1wbGUgcmF0ZSBmb3IgdGhlIHdhdmVmb3JtIGluIEh6XG4gICAgICovXG4gICAgY29uc3RydWN0b3IodXNlUHJvc2lnbnMsIHdwbSwgZndwbSwgZnJlcXVlbmN5ID0gNTUwLCBzYW1wbGVSYXRlID0gODAwMCkge1xuICAgICAgICBzdXBlcih1c2VQcm9zaWducywgd3BtLCBmd3BtKTtcbiAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgICAgIHRoaXMuZnJlcXVlbmN5ID0gZnJlcXVlbmN5OyAgLy8gZnJlcXVlbmN5IG9mIHdhdmUgaW4gSHpcbiAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgICAgIHRoaXMuc2FtcGxlUmF0ZSA9IHNhbXBsZVJhdGU7ICAvLyBzYW1wbGUgcmF0ZSBmb3IgdGhlIHdhdmVmb3JtIGluIEh6XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGEgc2FtcGxlIHdhdmVmb3JtLCBub3QgdXNpbmcgV2ViIEF1ZGlvIEFQSSAoc3luY2hyb25vdXMpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZW5kUGFkZGluZz0wXSAtIGhvdyBtdWNoIHNpbGVuY2UgaW4gbXMgdG8gYWRkIHRvIHRoZSBlbmQgb2YgdGhlIHdhdmVmb3JtLlxuICAgICAqIEByZXR1cm4ge251bWJlcltdfSBhbiBhcnJheSBvZiBmbG9hdHMgaW4gcmFuZ2UgWy0xLCAxXSByZXByZXNlbnRpbmcgdGhlIHdhdmUtZm9ybS5cbiAgICAgKi9cbiAgICBnZXRTYW1wbGUoZW5kUGFkZGluZyA9IDApIHtcbiAgICAgICAgcmV0dXJuIE1vcnNlQ1dXYXZlLmdldFNhbXBsZUdlbmVyYWwodGhpcy5nZXRUaW1pbmdzKCksIHRoaXMuZnJlcXVlbmN5LCB0aGlzLnNhbXBsZVJhdGUsIGVuZFBhZGRpbmcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhIHNhbXBsZSB3YXZlZm9ybSwgbm90IHVzaW5nIFdlYiBBdWRpbyBBUEkgKHN5bmNocm9ub3VzKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcltdfSB0aW1pbmdzIC0gbWlsbGlzZWNvbmQgdGltaW5ncywgK3ZlIG51bWJlcnMgcmVwcmVzZW50aW5nIHNvdW5kLCAtdmUgZm9yIG5vIHNvdW5kICgrdmUvLXZlIGNhbiBiZSBpbiBhbnkgb3JkZXIpXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyZXF1ZW5jeSAtIGZyZXF1ZW5jeSBvZiBzb3VuZCBpbiBIei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2FtcGxlUmF0ZSAtIHNhbXBsZSByYXRlIGluIEh6LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZW5kUGFkZGluZz0wXSAtIGhvdyBtdWNoIHNpbGVuY2UgaW4gbXMgdG8gYWRkIHRvIHRoZSBlbmQgb2YgdGhlIHdhdmVmb3JtLlxuICAgICAqIEByZXR1cm4ge251bWJlcltdfSBhbiBhcnJheSBvZiBmbG9hdHMgaW4gcmFuZ2UgWy0xLCAxXSByZXByZXNlbnRpbmcgdGhlIHdhdmUtZm9ybS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0U2FtcGxlR2VuZXJhbCh0aW1pbmdzLCBmcmVxdWVuY3ksIHNhbXBsZVJhdGUsIGVuZFBhZGRpbmcgPSAwKSB7XG4gICAgICAgIHZhciBzYW1wbGUgPSBbXTtcbiAgICAgICAgaWYgKHRpbWluZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRkIG1pbmltdW0gb2YgNW1zIHNpbGVuY2UgdG8gdGhlIGVuZCB0byBlbnN1cmUgdGhlIGZpbHRlcmVkIHNpZ25hbCBjYW4gZmluaXNoIGNsZWFubHlcbiAgICAgICAgdGltaW5ncy5wdXNoKC1NYXRoLm1heCg1LCBlbmRQYWRkaW5nKSk7XG5cbiAgICAgICAgLypcbiAgICAgICAgICAgIENvbXB1dGUgbG93cGFzcyBiaXF1YWQgZmlsdGVyIGNvZWZmaWNpZW50cyB1c2luZyBtZXRob2QgZnJvbSBDaHJvbWl1bVxuICAgICAgICAqL1xuXG4gICAgICAgIC8vIHNldCBsb3dwYXNzIGZyZXF1ZW5jeSBjdXRvZmYgdG8gMS41IHggd2F2ZSBmcmVxdWVuY3lcbiAgICAgICAgdmFyIGxvd3Bhc3NGcmVxID0gKGZyZXF1ZW5jeSAqIDEuNSkgLyBzYW1wbGVSYXRlO1xuICAgICAgICB2YXIgcSA9IE1hdGguU1FSVDFfMjtcbiAgICAgIFxuICAgICAgICB2YXIgc2luID0gTWF0aC5zaW4oMiAqIE1hdGguUEkgKiBsb3dwYXNzRnJlcSk7XG4gICAgICAgIHZhciBjb3MgPSBNYXRoLmNvcygyICogTWF0aC5QSSAqIGxvd3Bhc3NGcmVxKTtcbiAgICAgICAgdmFyIGFscGhhID0gc2luIC8gKDIgKiBNYXRoLnBvdygxMCwgcSAvIDIwKSk7XG4gICAgICBcbiAgICAgICAgdmFyIGEwID0gIDEgKyBhbHBoYTtcblxuICAgICAgICB2YXIgYjAgPSAoKDEgLSBjb3MpICogMC41KSAvIGEwO1xuICAgICAgICB2YXIgYjEgPSAoMSAtIGNvcykgLyBhMDtcbiAgICAgICAgdmFyIGIyID0gKCgxIC0gY29zKSAqIDAuNSkgLyBhMDtcbiAgICAgICAgdmFyIGExID0gKC0yICogY29zKSAvIGEwO1xuICAgICAgICB2YXIgYTIgPSAoMSAtIGFscGhhKSAvIGEwO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAgICBDb21wdXRlIGZpbHRlcmVkIHNpZ25hbFxuICAgICAgICAqL1xuXG4gICAgICAgIHZhciBzdGVwID0gTWF0aC5QSSAqIDIgKiBmcmVxdWVuY3kgLyBzYW1wbGVSYXRlO1xuICAgICAgICB2YXIgb24gPSB0aW1pbmdzWzBdID4gMCA/IDEgOiAwO1xuICAgICAgICB2YXIgeDAsIHgxID0gMCwgeDIgPSAwO1xuICAgICAgICB2YXIgeTAsIHkxID0gMCwgeTIgPSAwO1xuICAgICAgICB2YXIgZ2FpbiA9IDAuODEzOyAgLy8gZW1waXJpY2FsbHksIHRoZSBsb3dwYXNzIGZpbHRlciBvdXRwdXRzIHdhdmVmb3JtIG9mIG1hZ25pdHVkZSAxLjIzLCBzbyBuZWVkIHRvIHNjYWxlIGl0IGRvd24gdG8gYXZvaWQgY2xpcHBpbmdcbiAgICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aW1pbmdzLmxlbmd0aDsgdCArPSAxKSB7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBzYW1wbGVSYXRlICogTWF0aC5hYnModGltaW5nc1t0XSkgLyAxMDAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkdXJhdGlvbjsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgeDAgPSBvbiAqIE1hdGguc2luKGkgKiBzdGVwKTsgIC8vIHRoZSBpbnB1dCBzaWduYWxcbiAgICAgICAgICAgICAgICB5MCA9IGIwICogeDAgKyBiMSAqIHgxICsgYjIgKiB4MiAtIGExICogeTEgLSBhMiAqIHkyO1xuICAgICAgICAgICAgICAgIHNhbXBsZS5wdXNoKHkwICogZ2Fpbik7XG4gICAgICAgICAgICAgICAgeDIgPSB4MTtcbiAgICAgICAgICAgICAgICB4MSA9IHgwO1xuICAgICAgICAgICAgICAgIHkyID0geTE7XG4gICAgICAgICAgICAgICAgeTEgPSB5MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9uID0gMSAtIG9uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzYW1wbGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGEgc2FtcGxlIHdhdmVmb3JtIHVzaW5nIFdlYiBBdWRpbyBBUEkgKGFzeW5jaHJvbm91cykuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtlbmRQYWRkaW5nPTBdIC0gaG93IG11Y2ggc2lsZW5jZSBpbiBtcyB0byBhZGQgdG8gdGhlIGVuZCBvZiB0aGUgd2F2ZWZvcm0uXG4gICAgICogQHJldHVybiB7UHJvbWlzZShudW1iZXJbXSl9IGEgUHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gYXJyYXkgb2YgZmxvYXRzIGluIHJhbmdlIFstMSwgMV0gcmVwcmVzZW50aW5nIHRoZSB3YXZlLWZvcm0uXG4gICAgICovXG4gICAgZ2V0V0FBU2FtcGxlKGVuZFBhZGRpbmcgPSAwKSB7XG4gICAgICAgIC8vIGFkZCBtaW5pbXVtIG9mIDVtcyBzaWxlbmNlIHRvIHRoZSBlbmQgdG8gZW5zdXJlIHRoZSBmaWx0ZXJlZCBzaWduYWwgY2FuIGZpbmlzaCBjbGVhbmx5XG4gICAgICAgIGVuZFBhZGRpbmcgPSBNYXRoLm1heCg1LCBlbmRQYWRkaW5nKTtcbiAgICAgICAgdmFyIHRpbWluZ3MgPSB0aGlzLmdldFRpbWluZ3MoKTtcbiAgICAgICAgdGltaW5ncy5wdXNoKC1lbmRQYWRkaW5nKTtcbiAgICAgICAgdmFyIG9mZmxpbmVBdWRpb0NvbnRleHRDbGFzcyA9IHdpbmRvdy5PZmZsaW5lQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRPZmZsaW5lQXVkaW9Db250ZXh0O1xuICAgICAgICBpZiAob2ZmbGluZUF1ZGlvQ29udGV4dENsYXNzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIE9mZmxpbmVBdWRpb0NvbnRleHQgY2xhc3MgZGVmaW5lZFwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBidWZmZXIgbGVuZ3RoIGlzIHRoZSBNb3JzZSBkdXJhdGlvbiArIDVtcyB0byBsZXQgdGhlIGxvd3Bhc3MgZmlsdGVyIGVuZCBjbGVhbmx5XG4gICAgICAgIHZhciBvZmZsaW5lQ3R4ID0gbmV3IG9mZmxpbmVBdWRpb0NvbnRleHRDbGFzcygxLCB0aGlzLnNhbXBsZVJhdGUgKiAodGhpcy5nZXREdXJhdGlvbigpICsgZW5kUGFkZGluZykgLyAxMDAwLCB0aGlzLnNhbXBsZVJhdGUpO1xuICAgICAgICB2YXIgZ2Fpbk5vZGUgPSBvZmZsaW5lQ3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgLy8gZW1waXJpY2FsbHksIHRoZSBsb3dwYXNzIGZpbHRlciBvdXRwdXRzIHdhdmVmb3JtIG9mIG1hZ25pdHVkZSAxLjIzLCBzbyBuZWVkIHRvIHNjYWxlIGl0IGRvd24gdG8gYXZvaWQgY2xpcHBpbmdcbiAgICAgICAgZ2Fpbk5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLjgxMywgMCk7XG4gICAgICAgIHZhciBsb3dQYXNzTm9kZSA9IG9mZmxpbmVDdHguY3JlYXRlQmlxdWFkRmlsdGVyKCk7XG4gICAgICAgIGxvd1Bhc3NOb2RlLnR5cGUgPSBcImxvd3Bhc3NcIjtcbiAgICAgICAgbG93UGFzc05vZGUuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKHRoaXMuZnJlcXVlbmN5ICogMS4xLCAwKTsgIC8vIFRPRE86IHJlbW92ZSB0aGlzIG1hZ2ljIG51bWJlciBhbmQgbWFrZSB0aGUgZmlsdGVyIGNvbmZpZ3VyYWJsZT9cbiAgICAgICAgZ2Fpbk5vZGUuY29ubmVjdChsb3dQYXNzTm9kZSk7XG4gICAgICAgIGxvd1Bhc3NOb2RlLmNvbm5lY3Qob2ZmbGluZUN0eC5kZXN0aW5hdGlvbik7XG4gICAgICAgIHZhciB0ID0gMDtcbiAgICAgICAgdmFyIG9zY2lsbGF0b3I7XG4gICAgICAgIHZhciBkdXJhdGlvbjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aW1pbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IE1hdGguYWJzKHRpbWluZ3NbaV0pIC8gMTAwMDtcbiAgICAgICAgICAgIGlmICh0aW1pbmdzW2ldID4gMCkgeyAgLy8gLXZlIHRpbWluZ3MgYXJlIHNpbGVuY2VcbiAgICAgICAgICAgICAgICBvc2NpbGxhdG9yID0gb2ZmbGluZUN0eC5jcmVhdGVPc2NpbGxhdG9yKCk7XG4gICAgICAgICAgICAgICAgb3NjaWxsYXRvci50eXBlID0gJ3NpbmUnO1xuICAgICAgICAgICAgICAgIG9zY2lsbGF0b3IuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKHRoaXMuZnJlcXVlbmN5LCB0KTtcbiAgICAgICAgICAgICAgICBvc2NpbGxhdG9yLnN0YXJ0KHQpO1xuICAgICAgICAgICAgICAgIG9zY2lsbGF0b3Iuc3RvcCh0ICsgZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgIG9zY2lsbGF0b3IuY29ubmVjdChnYWluTm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ICs9IGR1cmF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvZmZsaW5lQ3R4LnN0YXJ0UmVuZGVyaW5nKCkudGhlbihmdW5jdGlvbihyZW5kZXJlZEJ1ZmZlcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmVkQnVmZmVyLmdldENoYW5uZWxEYXRhKDApO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCIvKlxuKiBSSUZGV0FWRSBhZGFwdGVkIGZyb20gUklGRldBVkUuanMgdjAuMDMgLSBBdWRpbyBlbmNvZGVyIGZvciBIVE1MNSA8YXVkaW8+IGVsZW1lbnRzLlxuKiBDb3B5bGVmdCAyMDExIGJ5IFBlZHJvIExhZGFyaWEgPHBlZHJvLmxhZGFyaWEgYXQgR21haWwgZG90IGNvbT5cbiogUHVibGljIERvbWFpblxuKi9cblxuLypcbiogQWRhcHRhdGlvbiBieSBTdGVwaGVuIEMuIFBoaWxsaXBzLCAyMDEzLTIwMTcuXG4qIEVtYWlsOiBzdGV2ZUBzY3BoaWxsaXBzLmNvbVxuKiBQdWJsaWMgRG9tYWluXG4qL1xuXG4vKipcbiAqIFV0aWxpdHkgdG8gY3JlYXRlIFJJRkYgV0FWRSBmaWxlIGRhdGEuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCBNb3JzZUNXV2F2ZSBmcm9tICdtb3JzZS1wcm8tY3ctd2F2ZSc7XG4gKiBpbXBvcnQgKiBhcyBSaWZmV2F2ZSBmcm9tICdtb3JzZS1wcm8tdXRpbC1yaWZmd2F2ZSc7XG4gKiB2YXIgbW9yc2VDV1dhdmUgPSBuZXcgTW9yc2VDV1dhdmUoKTtcbiAqIG1vcnNlQ1dXYXZlLnRyYW5zbGF0ZShcImFiY1wiKTtcbiAqIHZhciB3YXYgPSBSaWZmV2F2ZS5nZXREYXRhKG1vcnNlQ1dXYXZlLmdldFNhbXBsZSgpKTsgIC8vIHJldHVybnMgYnl0ZSBhcnJheSBvZiBXQVYgZmlsZVxuICAqL1xudmFyIHUzMlRvQXJyYXkgPSBmdW5jdGlvbihpKSB7XG4gICAgcmV0dXJuIFtpJjB4RkYsIChpPj44KSYweEZGLCAoaT4+MTYpJjB4RkYsIChpPj4yNCkmMHhGRl07XG59O1xuXG52YXIgdTE2VG9BcnJheSA9IGZ1bmN0aW9uKGkpIHtcbiAgICByZXR1cm4gW2kmMHhGRiwgKGk+PjgpJjB4RkZdO1xufTtcblxudmFyIHNwbGl0MTZiaXRBcnJheSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICB2YXIgciA9IFtdO1xuICAgIHZhciBqID0gMDtcbiAgICB2YXIgbGVuID0gZGF0YS5sZW5ndGg7XG4gICAgZm9yICh2YXIgaT0wOyBpPGxlbjsgaSsrKSB7XG4gICAgICAgIHJbaisrXSA9IGRhdGFbaV0gJiAweEZGO1xuICAgICAgICByW2orK10gPSAoZGF0YVtpXT4+OCkgJiAweEZGO1xuICAgIH1cbiAgICByZXR1cm4gcjtcbn07XG5cbnZhciBmVG9VOCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICB2YXIgciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICByW2ldID0gTWF0aC5tYXgoTWF0aC5taW4oMTI4ICsgTWF0aC5yb3VuZCgxMjcgKiBkYXRhW2ldKSwgMjU1KSwgMCk7XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuXG4vKipcbiAqIENvbnZlcnQgUENNIGRhdGEgdG8gV0FWIGZpbGUgZGF0YS5cbiAqIEBwYXJhbSB7bnVtYmVyW119IGRhdGEgLSB3YXZlZm9ybSBkYXRhLCBleHBlY3RlZCB0byBiZSBpbiAoYW5kIGNsYW1wZWQgdG8pIHJhbmdlIFstMSwxXVxuICogQHBhcmFtIHtudW1iZXJ9IFtzYW1wbGVSYXRlPTgwMDBdIC0gdGhlIHNhbXBsZSByYXRlIG9mIHRoZSB3YXZlZm9ybSBpbiBIelxuICogQHBhcmFtIHtudW1iZXJ9IFtiaXRzUGVyU2FtcGxlPThdIC0gbnVtYmVyIG9mIGJpdHMgdG8gc3RvcmUgZWFjaCBkYXRhIHBvaW50ICg4IG9yIDE2KVxuICogQHJldHVybiB7bnVtYmVyW119IC0gYXJyYXkgb2YgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSBXQVYgZmlsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YShkYXRhLCBzYW1wbGVSYXRlID0gODAwMCwgYml0c1BlclNhbXBsZSA9IDgpIHtcbiAgICBkYXRhID0gZlRvVTgoZGF0YSk7XG5cbiAgICB2YXIgaGVhZGVyID0geyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPRkZTIFNJWkUgTk9URVNcbiAgICAgICAgY2h1bmtJZCAgICAgIDogWzB4NTIsMHg0OSwweDQ2LDB4NDZdLCAvLyAwICAgIDQgICAgXCJSSUZGXCIgPSAweDUyNDk0NjQ2XG4gICAgICAgIGNodW5rU2l6ZSAgICA6IDAsICAgICAgICAgICAgICAgICAgICAgLy8gNCAgICA0ICAgIDM2K1N1YkNodW5rMlNpemUgPSA0Kyg4K1N1YkNodW5rMVNpemUpKyg4K1N1YkNodW5rMlNpemUpXG4gICAgICAgIGZvcm1hdCAgICAgICA6IFsweDU3LDB4NDEsMHg1NiwweDQ1XSwgLy8gOCAgICA0ICAgIFwiV0FWRVwiID0gMHg1NzQxNTY0NVxuICAgICAgICBzdWJDaHVuazFJZCAgOiBbMHg2NiwweDZkLDB4NzQsMHgyMF0sIC8vIDEyICAgNCAgICBcImZtdCBcIiA9IDB4NjY2ZDc0MjBcbiAgICAgICAgc3ViQ2h1bmsxU2l6ZTogMTYsICAgICAgICAgICAgICAgICAgICAvLyAxNiAgIDQgICAgMTYgZm9yIFBDTVxuICAgICAgICBhdWRpb0Zvcm1hdCAgOiAxLCAgICAgICAgICAgICAgICAgICAgIC8vIDIwICAgMiAgICBQQ00gPSAxXG4gICAgICAgIG51bUNoYW5uZWxzICA6IDEsICAgICAgICAgICAgICAgICAgICAgLy8gMjIgICAyICAgIE1vbm8gPSAxLCBTdGVyZW8gPSAyLi4uXG4gICAgICAgIHNhbXBsZVJhdGUgICA6IHNhbXBsZVJhdGUsICAgICAgICAgICAgLy8gMjQgICA0ICAgIDgwMDAsIDQ0MTAwLi4uXG4gICAgICAgIGJ5dGVSYXRlICAgICA6IDAsICAgICAgICAgICAgICAgICAgICAgLy8gMjggICA0ICAgIFNhbXBsZVJhdGUqTnVtQ2hhbm5lbHMqQml0c1BlclNhbXBsZS84XG4gICAgICAgIGJsb2NrQWxpZ24gICA6IDAsICAgICAgICAgICAgICAgICAgICAgLy8gMzIgICAyICAgIE51bUNoYW5uZWxzKkJpdHNQZXJTYW1wbGUvOFxuICAgICAgICBiaXRzUGVyU2FtcGxlOiBiaXRzUGVyU2FtcGxlLCAgICAgICAgIC8vIDM0ICAgMiAgICA4IGJpdHMgPSA4LCAxNiBiaXRzID0gMTZcbiAgICAgICAgc3ViQ2h1bmsySWQgIDogWzB4NjQsMHg2MSwweDc0LDB4NjFdLCAvLyAzNiAgIDQgICAgXCJkYXRhXCIgPSAweDY0NjE3NDYxXG4gICAgICAgIHN1YkNodW5rMlNpemU6IDAgICAgICAgICAgICAgICAgICAgICAgLy8gNDAgICA0ICAgIGRhdGEgc2l6ZSA9IE51bVNhbXBsZXMqTnVtQ2hhbm5lbHMqQml0c1BlclNhbXBsZS84XG4gICAgfTtcblxuICAgIGhlYWRlci5ibG9ja0FsaWduID0gKGhlYWRlci5udW1DaGFubmVscyAqIGhlYWRlci5iaXRzUGVyU2FtcGxlKSA+PiAzO1xuICAgIGhlYWRlci5ieXRlUmF0ZSA9IGhlYWRlci5ibG9ja0FsaWduICogaGVhZGVyLnNhbXBsZVJhdGU7XG4gICAgaGVhZGVyLnN1YkNodW5rMlNpemUgPSBkYXRhLmxlbmd0aCAqIChoZWFkZXIuYml0c1BlclNhbXBsZSA+PiAzKTtcbiAgICBoZWFkZXIuY2h1bmtTaXplID0gMzYgKyBoZWFkZXIuc3ViQ2h1bmsyU2l6ZTtcblxuICAgIHJldHVybiBoZWFkZXIuY2h1bmtJZC5jb25jYXQoXG4gICAgICAgIHUzMlRvQXJyYXkoaGVhZGVyLmNodW5rU2l6ZSksXG4gICAgICAgIGhlYWRlci5mb3JtYXQsXG4gICAgICAgIGhlYWRlci5zdWJDaHVuazFJZCxcbiAgICAgICAgdTMyVG9BcnJheShoZWFkZXIuc3ViQ2h1bmsxU2l6ZSksXG4gICAgICAgIHUxNlRvQXJyYXkoaGVhZGVyLmF1ZGlvRm9ybWF0KSxcbiAgICAgICAgdTE2VG9BcnJheShoZWFkZXIubnVtQ2hhbm5lbHMpLFxuICAgICAgICB1MzJUb0FycmF5KGhlYWRlci5zYW1wbGVSYXRlKSxcbiAgICAgICAgdTMyVG9BcnJheShoZWFkZXIuYnl0ZVJhdGUpLFxuICAgICAgICB1MTZUb0FycmF5KGhlYWRlci5ibG9ja0FsaWduKSxcbiAgICAgICAgdTE2VG9BcnJheShoZWFkZXIuYml0c1BlclNhbXBsZSksXG4gICAgICAgIGhlYWRlci5zdWJDaHVuazJJZCxcbiAgICAgICAgdTMyVG9BcnJheShoZWFkZXIuc3ViQ2h1bmsyU2l6ZSksXG4gICAgICAgIChoZWFkZXIuYml0c1BlclNhbXBsZSA9PSAxNikgPyBzcGxpdDE2Yml0QXJyYXkoZGF0YSkgOiBkYXRhXG4gICAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1JTUVUeXBlKCkge1xuICAgIHJldHVybiBcImF1ZGlvL3dhdlwiO1xufVxuIiwiXHJcbmltcG9ydCBNb3JzZUNXV2F2ZSBmcm9tICcuL21vcnNlLXByby9tb3JzZS1wcm8tY3ctd2F2ZS5qcyc7XHJcbmltcG9ydCAqIGFzIFJpZmZXYXZlIGZyb20gJy4vbW9yc2UtcHJvL21vcnNlLXByby11dGlsLXJpZmZ3YXZlLmpzJztcclxuXHJcbi8vaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xyXG5cclxuXHJcbi8vUE9DIHdlIHNhdmUgdG8gcGh5c2ljYWwgZmlsZVxyXG4vL2ZzLndyaXRlRmlsZVN5bmMoJ3Rlc3Qud2F2JyxuZXcgSW50OEFycmF5KCB3YXYpKTtcclxubGV0IG1lc3NhZ2UgPSAnSGVsbG8gV29ybGQyJztcclxuY29uc29sZS5sb2cobWVzc2FnZSk7XHJcbmxldCBteUF1ZGlvID0gbmV3IEF1ZGlvKCk7XHJcblxyXG5mdW5jdGlvbiBkb1BsYXkod29yZCwgd3BtLCBmd3BtLCBmcmVxdWVuY3ksIG9uRW5kZWQpIHtcclxuICAgIGxldCB1c2VQcm9zaWducz10cnVlO1xyXG4gICAgbGV0IHNhbXBsZVJhdGU9ODAwMDtcclxuICAgIGxldCB1bml0ID0gMTIwMCAvIGZ3cG07XHJcbiAgICBjb25zb2xlLmxvZyh1bml0KTtcclxuICAgIGxldCB3b3JkU3BhY2UgPSB1bml0ICogNztcclxuICAgIGxldCBtb3JzZUNXV2F2ZSA9IG5ldyBNb3JzZUNXV2F2ZSh1c2VQcm9zaWducywgd3BtLCBmd3BtLCBmcmVxdWVuY3ksIHNhbXBsZVJhdGUpO1xyXG4gICAgbW9yc2VDV1dhdmUudHJhbnNsYXRlKHdvcmQsZmFsc2UpO1xyXG4gICAgdmFyIHdhdiA9IFJpZmZXYXZlLmdldERhdGEobW9yc2VDV1dhdmUuZ2V0U2FtcGxlKHdvcmRTcGFjZSkpOyBcclxuICAgIG15QXVkaW8gPSBudWxsO1xyXG4gICAgbXlBdWRpbyA9IG5ldyBBdWRpbygpO1xyXG4gICAgbGV0IG15YnVmID0gbmV3IEludDhBcnJheSh3YXYpLmJ1ZmZlcjtcclxuICAgIFxyXG4gICAgbGV0IHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtteWJ1Zl0pKTtcclxuICAgIFxyXG4gICAgbXlBdWRpby5zcmM9dXJsO1xyXG4gICAgbXlBdWRpby5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsICgpPT57XHJcbiAgICAgICAgb25FbmRlZCgpO1xyXG4gICAgfSk7XHJcbiAgICBteUF1ZGlvLnBsYXkoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZG9QYXVzZShwYXVzZUNhbGxCYWNrKSB7XHJcbiAgICBteUF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ3BhdXNlJywgKCk9PntcclxuICAgICAgICBwYXVzZUNhbGxCYWNrKCk7XHJcbiAgICB9IClcclxuICAgIGNvbnNvbGUubG9nKFwiZW5kZWQ6XCIgKyBteUF1ZGlvLmVuZGVkKTtcclxuICAgIGlmIChteUF1ZGlvLmVuZGVkIHx8IG15QXVkaW8ucGF1c2VkIHx8ICFteUF1ZGlvLnNyYykge1xyXG4gICAgICAgIHBhdXNlQ2FsbEJhY2soKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBteUF1ZGlvLnBhdXNlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5kb1BsYXkgPSBkb1BsYXk7XHJcbndpbmRvdy5kb1BhdXNlID0gZG9QYXVzZTtcclxuXHJcbiJdLCJuYW1lcyI6WyJkaXRMZW5ndGgiLCJ3cG0iLCJNYXRoIiwicm91bmQiLCJfZGl0TGVuZ3RoIiwid29yZFNwYWNlIiwiZndwbSIsIl9mZGl0TGVuZ3RoIiwicmF0aW8iLCJTdHJpbmciLCJwcm90b3R5cGUiLCJ0cmltIiwidGhpcyIsInJlcGxhY2UiLCJ0ZXh0Mm1vcnNlSCIsIm1vcnNlMnRleHRIIiwicHJvc2lnbjJtb3JzZUgiLCJtb3JzZXBybzJ0ZXh0SCIsInRleHQybW9yc2Vwcm9IIiwic2lnbiIsInRpZHlNb3JzZSIsIm1vcnNlIiwiTW9yc2VDVyIsImNvbnN0cnVjdG9yIiwidXNlUHJvc2lnbnMiLCJpbnB1dCIsIm91dHB1dCIsIm1lc3NhZ2UiLCJpbnB1dFdhc01vcnNlIiwidW5kZWZpbmVkIiwiaGFzRXJyb3IiLCJ0cmFuc2xhdGUiLCJpc01vcnNlIiwidHJhbnNsYXRpb24iLCJtYXRjaCIsInJldCIsImRpY3QiLCJjIiwidCIsInRva2VucyIsInNwbGl0IiwiaSIsImxlbmd0aCIsInNsaWNlIiwidGV4dCIsInRvVXBwZXJDYXNlIiwidGlkeVRleHQiLCJwcm9zaWduIiwidG9rZW5fbGVuZ3RoIiwicHVzaCIsIkVycm9yIiwiY2xlYXJFcnJvciIsInN1cGVyIiwiX3dwbSIsIl9md3BtIiwiZ2V0VGltaW5ncyIsImdldFRpbWluZ3NHZW5lcmFsIiwic3RhdGljIiwiZGl0IiwiZGFoIiwiZGl0U3BhY2UiLCJjaGFyU3BhY2UiLCJ0aW1lcyIsImdldER1cmF0aW9uIiwiYWJzIiwiTW9yc2VDV1dhdmUiLCJmcmVxdWVuY3kiLCJzYW1wbGVSYXRlIiwiZ2V0U2FtcGxlIiwiZW5kUGFkZGluZyIsImdldFNhbXBsZUdlbmVyYWwiLCJ0aW1pbmdzIiwic2FtcGxlIiwibWF4IiwieDAiLCJ5MCIsImxvd3Bhc3NGcmVxIiwicSIsIlNRUlQxXzIiLCJzaW4iLCJQSSIsImNvcyIsImFscGhhIiwicG93IiwiYTAiLCJiMCIsImIxIiwiYjIiLCJhMSIsImEyIiwic3RlcCIsIm9uIiwieDEiLCJ4MiIsInkxIiwieTIiLCJkdXJhdGlvbiIsImdldFdBQVNhbXBsZSIsIm9mZmxpbmVBdWRpb0NvbnRleHRDbGFzcyIsIndpbmRvdyIsIk9mZmxpbmVBdWRpb0NvbnRleHQiLCJ3ZWJraXRPZmZsaW5lQXVkaW9Db250ZXh0Iiwib2ZmbGluZUN0eCIsImdhaW5Ob2RlIiwiY3JlYXRlR2FpbiIsImdhaW4iLCJzZXRWYWx1ZUF0VGltZSIsImxvd1Bhc3NOb2RlIiwiY3JlYXRlQmlxdWFkRmlsdGVyIiwidHlwZSIsImNvbm5lY3QiLCJkZXN0aW5hdGlvbiIsIm9zY2lsbGF0b3IiLCJjcmVhdGVPc2NpbGxhdG9yIiwic3RhcnQiLCJzdG9wIiwic3RhcnRSZW5kZXJpbmciLCJ0aGVuIiwicmVuZGVyZWRCdWZmZXIiLCJnZXRDaGFubmVsRGF0YSIsInUzMlRvQXJyYXkiLCJ1MTZUb0FycmF5IiwiY29uc29sZSIsImxvZyIsIm15QXVkaW8iLCJBdWRpbyIsImRvUGxheSIsIndvcmQiLCJvbkVuZGVkIiwidW5pdCIsIm1vcnNlQ1dXYXZlIiwid2F2IiwiZGF0YSIsImJpdHNQZXJTYW1wbGUiLCJyIiwibWluIiwiZlRvVTgiLCJoZWFkZXIiLCJjaHVua0lkIiwiY2h1bmtTaXplIiwiZm9ybWF0Iiwic3ViQ2h1bmsxSWQiLCJzdWJDaHVuazFTaXplIiwiYXVkaW9Gb3JtYXQiLCJudW1DaGFubmVscyIsImJ5dGVSYXRlIiwiYmxvY2tBbGlnbiIsInN1YkNodW5rMklkIiwic3ViQ2h1bmsyU2l6ZSIsImNvbmNhdCIsImoiLCJsZW4iLCJzcGxpdDE2Yml0QXJyYXkiLCJteWJ1ZiIsIkludDhBcnJheSIsImJ1ZmZlciIsInVybCIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIkJsb2IiLCJzcmMiLCJhZGRFdmVudExpc3RlbmVyIiwicGxheSIsImRvUGF1c2UiLCJwYXVzZUNhbGxCYWNrIiwiZW5kZWQiLCJwYXVzZWQiLCJwYXVzZSJdLCJzb3VyY2VSb290IjoiIn0=